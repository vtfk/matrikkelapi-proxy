/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Import dependencies
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const express = require('express');
const router = express.Router();
const MatrikkelClient = require('../../lib/KartverketMatrikkelAPI/MatrikkelClient');

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Routes
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
router.get('/', async (req, res, next) => {
    res.setHeader('Content-Type', 'application/json');
    let client = new MatrikkelClient('vtfkBergstrom', '496fPqhJ<qCtu(qAM7Z]', 'https://prodtest.matrikkel.no:443/matrikkelapi/wsapi/v1/MatrikkelenhetServiceWS');
    let polygon = [[10.29960689591465, 59.49699579544128],
    [10.30046509207753, 59.49702009219334],
    [10.30047682231077, 59.496787042682854],
    [10.299854442143015, 59.4967248170461],
    [10.29960689591465, 59.49699579544128]];
    let result = await client.getMatrikkelPolygon(polygon)

    res.type('json').send(JSON.stringify(result, null, 2));
})

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Exports
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
module.exports = router;
