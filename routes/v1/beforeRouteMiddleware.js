/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Import dependencies
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const TemplateClient = require('../../lib/TemplateClient/TemplateClient');

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Middleware function
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
async function f (req, res, next) {
  let matrikkelContext = TemplateClient.getTemplate('matrikkelContext.xml');

  matrikkelContext = TemplateClient.replacePlaceholder(matrikkelContext, req.body.matrikkelContext);

  matrikkelContext = TemplateClient.fillDefaultValues(matrikkelContext);
  req.matrikkelContext = matrikkelContext;

  next();
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Exports
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
module.exports = f;
